#!/bin/bash
source ../cmn/env.profile

SHELLFILE=${0}
LOGDIR=../log
LOGFILE=$LOGDIR"/"$SHELLFILE".log"

START_TM1=`date "+%Y-%m-%d %H:%M:%S"`
echo $SHELLFILE":Start Time:"$START_TM1

## please run at segment node
###### query start
psql -U gpadmin -d uec -e > $LOGFILE 2>&1 <<-!
\timing on
DELETE FROM TB_FDA_PDM_PRODUCT_EQUIP_H      WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDM_PRODUCT_H_S          WHERE GENERATE_FACTORY_CODE IN ('P1', 'P2');
DELETE FROM TB_FDA_PDM_PRODUCT_M            WHERE GENERATE_FACTORY_CODE IN ('P1', 'P2');
DELETE FROM TB_FDA_PDM_PRODUCT_PROG_INSP_H  WHERE PROGRESS_FACTORY_CODE IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_APD_DETAIL           WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_APD_H                WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_APD_PRE_PRCS         WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_EMEMO_FILE           WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_EMEMO_H              WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_EMEMO_LOT            WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_EQUIP_H              WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_EQUIP_WORK_ORDER_H   WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_DEF_DETAIL  WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_DEF_H       WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_DEF_IMG     WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_DETAIL      WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_FLAG        WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_H           WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_PNL_DETAIL  WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_GLS_INSP_PNL_H       WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_LOT_H                WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_MOD_PRODUCT_H        WHERE PANEL_FACTORY_CODE    IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_PNL_INSP_DEF_H       WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_PNL_INSP_DETAIL      WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_PNL_INSP_H           WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_PRODUCT_H            WHERE GENERATE_FACTORY_CODE IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_RECIPE_CHANGE_H      WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_RUN_NOTE             WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_SPC_POINT_H          WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_TRANSPORT_COMMAND_H  WHERE FACTORY_CODE          IN ('P1', 'P2');
DELETE FROM TB_FDA_PDW_TRANSPORT_EVENT_H    WHERE FACTORY_CODE          IN ('P1', 'P2');

!
###### query end

END_TM1=`date "+%Y-%m-%d %H:%M:%S"`

echo $SHELLFILE'|Start Time         |End Time' >> $LOGFILE
echo $SHELLFILE'|'$START_TM1'|'$END_TM1 >> $LOGFILE

echo $SHELLFILE":End Time  :"$END_TM1
